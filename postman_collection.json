{
  "info": {
    "name": "Artpond API",
    "description": "Complete API collection for the Artpond Spring Boot backend",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{auth_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "auth_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "user_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "username",
      "value": "",
      "type": "string"
    },
    {
      "key": "publication_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "comment_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "place_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "notification_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "report_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "appeal_id",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"testuser_{{$timestamp}}@example.com\",\n  \"password\": \"password123\",\n  \"username\": \"testuser_{{$timestamp}}\",\n  \"displayName\": \"Test User\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/register",
              "host": ["{{base_url}}"],
              "path": ["auth", "register"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has token', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('token');",
                  "    pm.expect(jsonData).to.have.property('userId');",
                  "    pm.expect(jsonData).to.have.property('email');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('auth_token', jsonData.token);",
                  "    pm.collectionVariables.set('user_id', jsonData.userId);",
                  "    console.log('✓ User registered and token saved');",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "console.log('Registering new user...');"
                ]
              }
            }
          ]
        },
        {
          "name": "Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"user@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains authentication data', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('token');",
                  "    pm.expect(jsonData).to.have.property('userId');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('auth_token', jsonData.token);",
                  "    pm.collectionVariables.set('user_id', jsonData.userId);",
                  "    console.log('✓ Login successful, token saved');",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "console.log('Attempting login...');"
                ]
              }
            }
          ]
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/refresh",
              "host": ["{{base_url}}"],
              "path": ["auth", "refresh"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('auth_token', jsonData.token);",
                  "    console.log('✓ Token refreshed');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/logout",
              "host": ["{{base_url}}"],
              "path": ["auth", "logout"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log('✓ Logged out successfully');"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Publications",
      "item": [
        {
          "name": "Get All Publications",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/publication?page=0&size=20&pubType=PHOTOGRAPHY",
              "host": ["{{base_url}}"],
              "path": ["publication"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                },
                {
                  "key": "pubType",
                  "value": "PHOTOGRAPHY",
                  "description": "Options: PHOTOGRAPHY, ILLUSTRATION, TEXT"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is paginated', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('content');",
                  "    pm.expect(jsonData).to.have.property('totalElements');",
                  "    pm.expect(jsonData).to.have.property('totalPages');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.content && jsonData.content.length > 0) {",
                  "        pm.collectionVariables.set('publication_id', jsonData.content[0].id);",
                  "        console.log('✓ Found ' + jsonData.content.length + ' publications');",
                  "    }",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Create Publication",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "data",
                  "value": "{\"description\":\"Test publication created at {{$timestamp}}\",\"contentWarning\":false,\"machineGenerated\":false,\"pubType\":\"TEXT\",\"tags\":[\"test\",\"automated\"],\"hideCleanImage\":false}",
                  "type": "text",
                  "contentType": "application/json"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/publication",
              "host": ["{{base_url}}"],
              "path": ["publication"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Publication created with ID', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('description');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('publication_id', jsonData.id);",
                  "    console.log('✓ Publication created with ID: ' + jsonData.id);",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Publication by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/publication/{{publication_id}}",
              "host": ["{{base_url}}"],
              "path": ["publication", "{{publication_id}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Publication has required fields', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('description');",
                  "    pm.expect(jsonData).to.have.property('author');",
                  "    pm.expect(jsonData).to.have.property('creationDate');",
                  "});",
                  "",
                  "console.log('✓ Publication retrieved successfully');"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get('publication_id')) {",
                  "    console.warn('⚠ publication_id not set. Run \"Create Publication\" first.');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Update Publication",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"description\": \"Updated at {{$timestamp}}\",\n  \"tags\": [\"updated\", \"test\"],\n  \"contentWarning\": false\n}"
            },
            "url": {
              "raw": "{{base_url}}/publication/{{publication_id}}",
              "host": ["{{base_url}}"],
              "path": ["publication", "{{publication_id}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Publication updated', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('description');",
                  "});",
                  "",
                  "console.log('✓ Publication updated successfully');"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get('publication_id')) {",
                  "    console.warn('⚠ publication_id not set.');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Publication",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/publication/{{publication_id}}",
              "host": ["{{base_url}}"],
              "path": ["publication", "{{publication_id}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log('✓ Publication deleted successfully');",
                  "pm.collectionVariables.set('publication_id', '');"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get('publication_id')) {",
                  "    console.warn('⚠ publication_id not set.');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Toggle Heart",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/publication/{{publication_id}}/heart",
              "host": ["{{base_url}}"],
              "path": ["publication", "{{publication_id}}", "heart"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log('✓ Heart toggled successfully');"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get('publication_id')) {",
                  "    console.warn('⚠ publication_id not set.');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Publications by Tag",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/publication/tag/:tagName?page=0&size=20",
              "host": ["{{base_url}}"],
              "path": ["publication", "tag", ":tagName"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ],
              "variable": [
                {
                  "key": "tagName",
                  "value": "art"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Comments",
      "item": [
        {
          "name": "Get Comments",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/publication/{{publication_id}}/comment",
              "host": ["{{base_url}}"],
              "path": ["publication", "{{publication_id}}", "comment"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is an array', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.length > 0) {",
                  "        pm.collectionVariables.set('comment_id', jsonData[0].id);",
                  "        console.log('✓ Found ' + jsonData.length + ' comments');",
                  "    }",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get('publication_id')) {",
                  "    console.warn('⚠ publication_id not set.');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Add Comment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Test comment at {{$timestamp}}\",\n  \"parentId\": null\n}"
            },
            "url": {
              "raw": "{{base_url}}/publication/{{publication_id}}/comment",
              "host": ["{{base_url}}"],
              "path": ["publication", "{{publication_id}}", "comment"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Comment created', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('id');",
                  "    pm.expect(jsonData).to.have.property('text');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('comment_id', jsonData.id);",
                  "    console.log('✓ Comment created with ID: ' + jsonData.id);",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get('publication_id')) {",
                  "    console.warn('⚠ publication_id not set.');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete Comment",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/publication/{{publication_id}}/comment",
              "host": ["{{base_url}}"],
              "path": ["publication", "{{publication_id}}", "comment"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log('✓ Comment deleted successfully');"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Get User by Username",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/user/{{username}}",
              "host": ["{{base_url}}"],
              "path": ["user", "{{username}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('User has required fields', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('userId');",
                  "    pm.expect(jsonData).to.have.property('username');",
                  "});",
                  "",
                  "console.log('✓ User retrieved by username');"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get('username')) {",
                  "    console.log('Setting default username for testing');",
                  "    pm.collectionVariables.set('username', 'testuser');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get User by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/user/i/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["user", "i", "{{user_id}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('User details retrieved', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('userId');",
                  "    pm.expect(jsonData).to.have.property('publications');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    pm.collectionVariables.set('username', jsonData.username);",
                  "    console.log('✓ User details retrieved');",
                  "}"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get('user_id')) {",
                  "    console.warn('⚠ user_id not set.');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Update User",
          "request": {
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "data",
                  "value": "{\"description\":\"Updated bio at {{$timestamp}}\",\"showExplicit\":true}",
                  "type": "text",
                  "contentType": "application/json"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/user/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["user", "{{user_id}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('User updated', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('userId');",
                  "});",
                  "",
                  "console.log('✓ User updated successfully');"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get('user_id')) {",
                  "    console.warn('⚠ user_id not set.');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Delete User",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/user/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["user", "{{user_id}}"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log('✓ User deleted successfully');"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get('user_id')) {",
                  "    console.warn('⚠ user_id not set.');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Switch Role",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{base_url}}/user/switch-role",
              "host": ["{{base_url}}"],
              "path": ["user", "switch-role"]
            }
          }
        }
      ]
    },
    {
      "name": "Map",
      "item": [
        {
          "name": "Get Places in View",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/map/in-view?minLat=-12.1&minLon=-77.1&maxLat=-12.0&maxLon=-77.0",
              "host": ["{{base_url}}"],
              "path": ["map", "in-view"],
              "query": [
                {
                  "key": "minLat",
                  "value": "-12.1"
                },
                {
                  "key": "minLon",
                  "value": "-77.1"
                },
                {
                  "key": "maxLat",
                  "value": "-12.0"
                },
                {
                  "key": "maxLon",
                  "value": "-77.0"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is an array of places', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.length > 0) {",
                  "        pm.collectionVariables.set('place_id', jsonData[0].id);",
                  "        console.log('✓ Found ' + jsonData.length + ' places');",
                  "    }",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Search Places",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/map/search?query=Lima",
              "host": ["{{base_url}}"],
              "path": ["map", "search"],
              "query": [
                {
                  "key": "query",
                  "value": "Lima"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Search results returned', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.be.an('array');",
                  "});",
                  "",
                  "console.log('✓ Places search completed');"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Posts for Place",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/map/{{place_id}}/posts?page=0&size=20",
              "host": ["{{base_url}}"],
              "path": ["map", "{{place_id}}", "posts"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is paginated', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('content');",
                  "});",
                  "",
                  "console.log('✓ Posts for place retrieved');"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get('place_id')) {",
                  "    console.warn('⚠ place_id not set.');",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Notifications",
      "item": [
        {
          "name": "Get My Notifications",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/notifications?page=0&size=20",
              "host": ["{{base_url}}"],
              "path": ["notifications"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is paginated', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('content');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.content && jsonData.content.length > 0) {",
                  "        pm.collectionVariables.set('notification_id', jsonData.content[0].id);",
                  "        console.log('✓ Found ' + jsonData.content.length + ' notifications');",
                  "    }",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Unread Count",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/notifications/unread-count",
              "host": ["{{base_url}}"],
              "path": ["notifications", "unread-count"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Unread count is a number', function () {",
                  "    var count = pm.response.json();",
                  "    pm.expect(count).to.be.a('number');",
                  "});",
                  "",
                  "console.log('✓ Unread count: ' + pm.response.json());"
                ]
              }
            }
          ]
        },
        {
          "name": "Mark Notification as Read",
          "request": {
            "method": "PATCH",
            "header": [],
            "url": {
              "raw": "{{base_url}}/notifications/{{notification_id}}/read",
              "host": ["{{base_url}}"],
              "path": ["notifications", "{{notification_id}}", "read"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log('✓ Notification marked as read');"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get('notification_id')) {",
                  "    console.warn('⚠ notification_id not set.');",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Reports",
      "item": [
        {
          "name": "Create Report",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"publicationId\": {{publication_id}},\n  \"reason\": \"SPAM\",\n  \"details\": \"Test report created at {{$timestamp}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/report",
              "host": ["{{base_url}}"],
              "path": ["report"]
            },
            "description": "Reasons: SPAM, INAPPROPRIATE_CONTENT, HARASSMENT, COPYRIGHT, UNMARKED_AI, OTHER"
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log('✓ Report created successfully');"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get('publication_id')) {",
                  "    console.warn('⚠ publication_id not set.');",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Appeals",
      "item": [
        {
          "name": "Create Appeal",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"publicationId\": {{publication_id}},\n  \"justification\": \"Test appeal at {{$timestamp}} - content does not violate guidelines\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/appeal",
              "host": ["{{base_url}}"],
              "path": ["appeal"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log('✓ Appeal created successfully');"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get('publication_id')) {",
                  "    console.warn('⚠ publication_id not set.');",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Tags",
      "item": [
        {
          "name": "Delete Tag",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/tag",
              "host": ["{{base_url}}"],
              "path": ["tag"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log('✓ Tag deleted successfully');"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Admin - Moderation",
      "item": [
        {
          "name": "Get Reports",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/moderation/reports?status=PENDING&page=0&size=20",
              "host": ["{{base_url}}"],
              "path": ["admin", "moderation", "reports"],
              "query": [
                {
                  "key": "status",
                  "value": "PENDING",
                  "description": "Options: PENDING, REVIEWED, ACTION_TAKEN, DISMISSED"
                },
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is paginated', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('content');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.content && jsonData.content.length > 0) {",
                  "        pm.collectionVariables.set('report_id', jsonData.content[0].id);",
                  "        console.log('✓ Found ' + jsonData.content.length + ' reports');",
                  "    }",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Resolve Report",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"resolutionNotes\": \"Report reviewed and action taken at {{$timestamp}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/admin/moderation/reports/{{report_id}}/resolve",
              "host": ["{{base_url}}"],
              "path": ["admin", "moderation", "reports", "{{report_id}}", "resolve"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log('✓ Report resolved successfully');"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get('report_id')) {",
                  "    console.warn('⚠ report_id not set.');",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Failed Place Tasks",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/moderation/tasks/place/failed?page=0&size=20",
              "host": ["{{base_url}}"],
              "path": ["admin", "moderation", "tasks", "place", "failed"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is paginated', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('content');",
                  "});",
                  "",
                  "console.log('✓ Failed place tasks retrieved');"
                ]
              }
            }
          ]
        },
        {
          "name": "Retry Place Task",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/moderation/tasks/place/1/retry",
              "host": ["{{base_url}}"],
              "path": ["admin", "moderation", "tasks", "place", "1", "retry"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log('✓ Place task retry initiated');"
                ]
              }
            }
          ]
        },
        {
          "name": "Dismiss Place Task",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/moderation/tasks/place1",
              "host": ["{{base_url}}"],
              "path": ["admin", "moderation", "tasks", "place1"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log('✓ Place task dismissed');"
                ]
              }
            }
          ]
        },
        {
          "name": "Get Failed AI Tasks",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/moderation/tasks/ai/failed?page=0&size=20",
              "host": ["{{base_url}}"],
              "path": ["admin", "moderation", "tasks", "ai", "failed"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is paginated', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('content');",
                  "});",
                  "",
                  "console.log('✓ Failed AI tasks retrieved');"
                ]
              }
            }
          ]
        },
        {
          "name": "Retry AI Task",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/moderation/tasks/ai/1/retry",
              "host": ["{{base_url}}"],
              "path": ["admin", "moderation", "tasks", "ai", "1", "retry"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log('✓ AI task retry initiated');"
                ]
              }
            }
          ]
        },
        {
          "name": "Dismiss AI Task",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/admin/moderation/tasks/ai/1",
              "host": ["{{base_url}}"],
              "path": ["admin", "moderation", "tasks", "ai", "1"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log('✓ AI task dismissed');"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "Admin - Appeals",
      "item": [
        {
          "name": "Get Appeals",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/appeal/admin/list?page=0&size=20",
              "host": ["{{base_url}}"],
              "path": ["appeal", "admin", "list"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                }
              ]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response is paginated', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('content');",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    var jsonData = pm.response.json();",
                  "    if (jsonData.content && jsonData.content.length > 0) {",
                  "        pm.collectionVariables.set('appeal_id', jsonData.content[0].id);",
                  "        console.log('✓ Found ' + jsonData.content.length + ' appeals');",
                  "    }",
                  "}"
                ]
              }
            }
          ]
        },
        {
          "name": "Resolve Appeal",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"adminNotes\": \"Appeal reviewed and approved at {{$timestamp}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/appeal/admin/{{appeal_id}}/resolve",
              "host": ["{{base_url}}"],
              "path": ["appeal", "admin", "{{appeal_id}}", "resolve"]
            }
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "console.log('✓ Appeal resolved successfully');"
                ]
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "exec": [
                  "if (!pm.collectionVariables.get('appeal_id')) {",
                  "    console.warn('⚠ appeal_id not set.');",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    }
  ]
}
